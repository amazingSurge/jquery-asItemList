/**
* jQuery asItemList v0.2.1
* https://github.com/amazingSurge/jquery-asItemList
*
* Copyright (c) amazingSurge
* Released under the LGPL-3.0 license
*/
!function(e,t){if("function"==typeof define&&define.amd)define(["jquery","Sortable"],t);else if("undefined"!=typeof exports)t(require("jquery"),require("Sortable"));else{var i={exports:{}};t(e.jQuery,e.Sortable),e.jqueryAsItemListEs=i.exports}}(this,function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=i(e),a=i(t),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),u={namespace:"asItemList",sortableID:"asItemList-sortable",leng:"en",itemList:function(){return'<div class="namespace-container"><a class="namespace-addItem"><i></i>{{strings.addTitle}}</a><ul class="namespace-list"></ul><div class="namespace-prompt">{{strings.prompt}}</div></div>'},render:function(e){return e},process:function(e){if(e){var t=JSON.stringify(e);return"[]"===t?"":t}return""},parse:function(e){return e?$.parseJSON(e):null},onInit:null,onReady:null,onAdd:null,onEdit:null,onAfterFill:null},o="asItemList",h={},d=function(){function e(t,i){s(this,e),this.element=t,this.$element=(0,n.default)(t),this.options=n.default.extend({},u,i,this.$element.data()),"undefined"==typeof h[this.options.lang]?this.lang="en":this.lang=this.options.lang,this.strings=n.default.extend({},h[this.lang],this.options.strings),this.namespace=this.options.namespace,this.classes={disabled:this.namespace+"_disabled",wrapper:this.namespace+"-wrapper",active:this.namespace+"_active",empty:this.namespace+"_empty",hide:this.namespace+"_hide",hover:this.namespace+"_hover"},this.$element.addClass(this.namespace),this.$element.wrap('<div class="'+this.classes.wrapper+'"></div>'),this.$wrapper=this.$element.parent(),this.$itemList=(0,n.default)(this.options.itemList().replace(/namespace/g,this.namespace).replace(/\{\{strings.addTitle\}\}/g,this.strings.addTitle).replace(/\{\{strings.prompt\}\}/g,this.strings.prompt)),this.$addItem=this.$itemList.find("."+this.namespace+"-addItem"),this.$prompt=this.$itemList.find("."+this.namespace+"-prompt"),this.$list=this.$itemList.find("."+this.namespace+"-list"),this.$list.attr("id",this.options.sortableID),this.disabled=!1,this.initialized=!1,this._trigger("init"),this.init()}return r(e,[{key:"init",value:function(){var e=this;this.$element.hide(),this.$element.before(this.$itemList),this.value=this.options.parse(this.$element.val()),this.set(this.value,!1),this.$addItem.on("click",function(){e._trigger("add")});var t=document.getElementById(this.options.sortableID);this.$list.on("click","li",n.default.proxy(function(e){this.editIndex=(0,n.default)(e.currentTarget).index(),this._trigger("edit",this.editIndex)},this)).on("mouseenter","li",n.default.proxy(function(e){(0,n.default)(e.currentTarget).addClass(this.classes.hover)},this)).on("mouseleave","li",n.default.proxy(function(e){(0,n.default)(e.currentTarget).removeClass(this.classes.hover)},this)).on("mouseenter","."+this.namespace+"-list-drag",n.default.proxy(function(i){this.sortIndex=(0,n.default)(i.currentTarget).parent().index(),this.sort=new a.default(t,{onUpdate:function(t){var i=e.value.splice(e.sortIndex,1);e.value.splice((0,n.default)(t.item).index(),0,i[0]),e.$element.val(e.options.process(e.value))}})},this)).on("mouseleave","."+this.namespace+"-list-drag",n.default.proxy(function(){},this)).on("click","."+this.namespace+"-list-remove",n.default.proxy(function(e){return this.indexed=(0,n.default)(e.currentTarget).parent().index(),this.remove(this.indexed),!1},this))}},{key:"_update",value:function(){this.$element.val(this.val()),this._trigger("change",this.value)}},{key:"_updateList",value:function(){if(this.value.length>this.$list.children().length)this._addList();else if(this.value.length===this.$list.children().length&&0!==this.value.length){var e=this.value[this.editIndex];this.$list.children().eq(this.editIndex).html(this._editList(e))}else 0===this.value.length&&this.$wrapper.addClass(this.classes.empty),this._delList()}},{key:"_editList",value:function(e){return'<span class="'+this.namespace+'-list-drag"></span><div class="'+this.namespace+'-list-item">'+this.options.render(e)+'</div><a href="#" class="'+this.namespace+'-list-remove"></a>'}},{key:"_addList",value:function(){this.$wrapper.removeClass(this.classes.empty);for(var e,t=this.$list.children().length;t<this.value.length;t++)e=this.value[t],(0,n.default)("<li/>",{html:this._editList(e)}).appendTo(this.$list)}},{key:"_delList",value:function(){this.$list.children().eq(this.indexed).remove()}},{key:"_clearList",value:function(){this.$list.children().remove()}},{key:"_trigger",value:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var n=[this].concat(i);this.$element.trigger(o+"::"+e,n),e=e.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)});var a="on"+e;"function"==typeof this.options[a]&&this.options[a].apply(this,i)}},{key:"val",value:function(e){if("undefined"==typeof e)return this.options.process(this.value);var t=this.options.parse(e);t?this.set(t):this.clear()}},{key:"set",value:function(e,t){n.default.isArray(e)?this.value=e:this.value=[],this._clearList(),this._updateList(),t!==!1&&this._update()}},{key:"clear",value:function(e){this.value=[],this._clearList(),this.$wrapper.addClass(this.classes.empty),e!==!1&&this._update()}},{key:"remove",value:function(e,t){this.value.splice(e,1),this._updateList(),t!==!1&&this._update()}},{key:"add",value:function(e,t){for(var i in e)({}).hasOwnProperty.call(e,i)&&this.value.push(e[i]);this._updateList(),t!==!1&&this._update()}},{key:"update",value:function(e,t,i){this.value[e]=t,this._updateList(),i!==!1&&this._update()}},{key:"get",value:function(){return this.value}},{key:"enable",value:function(){this.disabled=!1,this.$wrapper.removeClass(this.classes.disabled),this._trigger("enable")}},{key:"disable",value:function(){this.disabled=!0,this.$wrapper.addClass(this.classes.disabled),this._trigger("disable")}},{key:"destroy",value:function(){this.$element.data(o,null),this._trigger("destroy")}}],[{key:"localize",value:function(e,t){h[e]=t}},{key:"setDefaults",value:function(e){n.default.extend(u,n.default.isPlainObject(e)&&e)}}]),e}();d.localize("en",{addTitle:"Add new list",prompt:"There is no item"});var c={version:"0.2.1"},p="asItemList",f=n.default.fn.asItemList,m=function(e){for(var t=this,i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if("string"==typeof e){var r=function(){var i=e;if(/^_/.test(i))return{v:!1};if(!/^(get|val)/.test(i))return{v:t.each(function(){var e=n.default.data(this,p);e&&"function"==typeof e[i]&&e[i].apply(e,s)})};var a=t.first().data(p);return a&&"function"==typeof a[i]?{v:a[i].apply(a,s)}:void 0}();if("object"===("undefined"==typeof r?"undefined":l(r)))return r.v}return this.each(function(){(0,n.default)(this).data(p)||(0,n.default)(this).data(p,new d(this,e))})};n.default.fn.asItemList=m,n.default.asItemList=n.default.extend({setDefaults:d.setDefaults,noConflict:function(){return n.default.fn.asItemList=f,m}},c)});